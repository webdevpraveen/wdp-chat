<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>SRMU Web Chat</title>
<style>
:root{
  --bg:#f1f4f8; --panel:#fff;
  --self:#d8f8d2; --other:#e6f0ff; --admin:#ffe6e6; --welcome:#fff7cc;
  --accent:#2b7cff; --muted:#6b7280; --radius:12px;
}
*{box-sizing:border-box}
body{
  margin:0;background:var(--bg);
  font-family:Inter,Arial;
  display:flex;justify-content:center;align-items:center;
  height:100vh;color:#111;
}

/* MAIN CHAT CONTAINER */
.chat{
  width:100%;max-width:980px;height:92vh;background:var(--panel);
  border-radius:12px;box-shadow:0 12px 30px rgba(25,35,45,0.08);
  display:flex;flex-direction:column;overflow:hidden;
}

/* FIXED HEADER */
.header{
  padding:12px 16px;border-bottom:1px solid #e5eaf0;background:#fff;
}
.header-row{
  display:flex;justify-content:space-between;align-items:center;
}

/* LEFT BOX */
.online-box{
  padding:6px 12px;background:#fff;border:1px solid #e5eaf0;
  border-radius:10px;font-weight:600;cursor:pointer;
}

/* CENTER TITLE */
.title-center{
  text-align:center;display:flex;flex-direction:column;align-items:center;
}
.app-title{
  font-size:20px;font-weight:700;
}
.you-are{
  font-size:13px;color:#6b7280;margin-top:2px;
}

/* RIGHT SIDE */
.right-wrap{
  display:flex;gap:12px;align-items:center;
}
.about-btn{
  padding:6px 12px;border-radius:8px;border:1px solid #ddd;
  background:#fff;cursor:pointer;font-size:13px;
}

/* POPUP (ONLINE USERS) */
.popup{
  position:absolute;right:16px;top:95px;width:320px;background:#fff;
  border-radius:10px;box-shadow:0 12px 40px rgba(0,0,0,0.15);
  display:none;z-index:50;
}
.popup-header{
  padding:10px 12px;border-bottom:1px solid #eee;
  display:flex;justify-content:space-between;align-items:center;font-weight:600;
}
.close-btn{cursor:pointer;font-size:18px;}
.popup-list div{
  padding:8px 12px;border-bottom:1px solid #f5f5f5;
  display:flex;justify-content:space-between;align-items:center;gap:8px;
}
.msg-button{
  padding:6px 8px;border-radius:6px;border:1px solid #e6eef6;
  background:#fff;cursor:pointer;font-size:13px;
}

/* ADMIN PANEL */
.admin-panel{
  padding:10px;display:none;gap:8px;border-bottom:1px solid #e5eaf0;
}
.admin-panel button{
  padding:6px 12px;border-radius:8px;border:1px solid #ddd;
  background:#fff;cursor:pointer;font-size:13px;
}

/* MESSAGES */
.messages{
  flex:1;padding:18px;overflow:auto;display:flex;flex-direction:column;gap:12px;
}
.event{text-align:center;font-size:13px;color:var(--muted);}

/* BUBBLES */
.msg-row{display:flex;}
.left{justify-content:flex-start;}
.right{justify-content:flex-end;}

.bubble{
  max-width:75%;padding:10px 14px;border-radius:var(--radius);
  box-shadow:0 4px 16px rgba(0,0,0,0.06);
}
.self{background:var(--self);}
.other{background:var(--other);}
.admin{background:var(--admin);border-left:4px solid #ff6b6b;}
.welcome{background:var(--welcome);}
.dm{border:2px dashed rgba(120,80,200,0.12);}

.meta{
  display:flex;justify-content:space-between;margin-bottom:6px;font-size:12px;
}
.meta-name{font-weight:600;}
.meta-time{color:var(--muted);}

.typing{height:18px;padding-left:16px;color:var(--muted);}

/* COMPOSER */
.composer{
  padding:10px 14px;display:flex;align-items:center;gap:10px;
  border-top:1px solid #e5eaf0;background:#fafbfd;
}
.composer input{
  flex:1;padding:12px 16px;border-radius:14px;border:1px solid #cfd6df;
  background:#fff;font-size:15px;
}
.composer button{
  background:var(--accent);padding:10px 20px;border:none;border-radius:14px;
  font-weight:600;color:#fff;cursor:pointer;
}

/* EMOJI */
.emoji-btn{
  width:44px;height:44px;border-radius:14px;background:#fff;border:1px solid #d7dce3;
  display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:22px;
}
.emoji-popup{
  position:absolute;bottom:90px;left:20px;background:#fff;border:1px solid #ddd;
  border-radius:12px;padding:10px;display:none;
}
.emoji-popup span{font-size:24px;padding:6px;cursor:pointer;}

/* DM HOLDER */
#dmHolder{display:none;align-items:center;}
.dm-tag{
  padding:6px 12px;background:#f3e8ff;border-radius:10px;border:1px solid #e8d7ff;
  font-weight:600;
}
.cancel-dm{
  margin-left:8px;color:#d54949;cursor:pointer;font-weight:700;
}

/* INVITE MODAL */
.invite-modal{
  position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);
  background:#fff;border-radius:10px;padding:16px;
  box-shadow:0 20px 60px rgba(0,0,0,0.25);z-index:200;display:none;width:320px;
}
.invite-header{font-weight:700;margin-bottom:8px;}
.invite-actions{
  display:flex;justify-content:flex-end;gap:8px;margin-top:12px;
}
.invite-btn{
  padding:8px 12px;border-radius:8px;border:1px solid #ddd;background:#fff;cursor:pointer;
}
.invite-accept{
  background:#2b7cff;color:#fff;border:none;
}

/* ADMIN DASHBOARD */
.admin-dashboard{
  position:fixed;left:16px;top:110px;width:420px;height:60vh;background:#fff;
  border-radius:10px;box-shadow:0 12px 40px rgba(0,0,0,0.12);
  padding:12px;overflow:auto;display:none;z-index:80;
}
.admin-dashboard h4{margin:6px 0 10px 0;}
.dm-list-item{
  padding:8px;border-bottom:1px solid #f3f3f3;
  display:flex;justify-content:space-between;align-items:center;
}
.dm-view{
  padding:10px;border-radius:8px;background:#fbfbfe;height:60vh;
  overflow:auto;display:none;
}

/* REACTIONS */
.reaction-popup{
  position:absolute;background:#fff;padding:6px 10px;border-radius:12px;
  box-shadow:0 4px 20px rgba(0,0,0,0.15);display:none;
  gap:8px;z-index:80;font-size:22px;
}
.reaction-popup span{cursor:pointer;}
.reaction-bar{display:flex;gap:6px;margin-top:6px;}
.reaction-chip{
  padding:2px 6px;background:#f0f2f5;border-radius:8px;font-size:13px;
}

@media(max-width:900px){
  .admin-dashboard{display:none!important}
}
</style>
</head>

<body>

<!-- REACTION POPUP -->
<div id="reactionPopup" class="reaction-popup">
  <span data-r="üëç">üëç</span><span data-r="‚ù§Ô∏è">‚ù§Ô∏è</span><span data-r="üòÇ">üòÇ</span>
  <span data-r="üòÆ">üòÆ</span><span data-r="üò¢">üò¢</span><span data-r="üò°">üò°</span>
</div>

<!-- DM INVITE -->
<div id="inviteModal" class="invite-modal">
  <div class="invite-header" id="inviteText">User invited you</div>
  <div id="inviteMeta" style="color:var(--muted);font-size:13px"></div>
  <div class="invite-actions">
    <button id="inviteDecline" class="invite-btn">Cancel</button>
    <button id="inviteAccept" class="invite-btn invite-accept">Join</button>
  </div>
</div>

<!-- MAIN CHAT -->
<div class="chat">

  <!-- CLEAN HEADER WITHOUT GITHUB ICON -->
  <div class="header">
    <div class="header-row">

      <div id="onlineBox" class="online-box">0 online</div>

      <div class="title-center">
        <div class="app-title">SRMU Web Chat</div>
        <div id="youAre" class="you-are"></div>
      </div>

      <div class="right-wrap">
        <a href="/about.html" id="aboutBtn" class="about-btn">About</a>
      </div>

    </div>
  </div>

  <!-- ONLINE POPUP -->
  <div id="popup" class="popup">
    <div class="popup-header">
      Online Users <div id="closePopup" class="close-btn">√ó</div>
    </div>
    <div id="popupList" class="popup-list"></div>
  </div>

  <!-- ADMIN PANEL -->
  <div id="adminPanel" class="admin-panel">
    <button id="clearChat">Clear</button>
    <button id="muteAll">Mute</button>
    <button id="unmuteAll">Unmute</button>
    <button id="openAdminDash">Admin Dashboard</button>
  </div>

  <!-- MESSAGES -->
  <div id="messages" class="messages"></div>
  <div id="typing" class="typing"></div>

  <!-- COMPOSER -->
  <div class="composer">
    <div id="emojiBtn" class="emoji-btn">üòä</div>
    <div id="emojiPopup" class="emoji-popup">
      <span>üòÄ</span><span>üòÅ</span><span>üòÇ</span><span>ü§£</span>
      <span>üòç</span><span>üòé</span><span>üò≠</span><span>üëÄ</span>
      <span>ü§î</span><span>üëç</span><span>üëé</span><span>üëã</span>
    </div>

    <div id="dmHolder">
      <span id="dmTag" class="dm-tag"></span>
      <span id="dmCancel" class="cancel-dm">‚úñ</span>
    </div>

    <input id="input" placeholder="Type your message..." autocomplete="off" />
    <button id="send">Send</button>
  </div>
</div>

<!-- ADMIN DASHBOARD -->
<div id="adminDashboard" class="admin-dashboard">
  <h4>Admin Dashboard</h4>
  <div><strong>Online users</strong></div>
  <div id="adminOnline"></div>
  <hr/>
  <div style="display:flex;justify-content:space-between;align-items:center;">
    <div><strong>DM Logs (last 60m)</strong></div>
    <button id="refreshDmLogs" class="invite-btn">Refresh</button>
  </div>
  <div id="dmList"></div>
  <hr/>
  <div id="dmViewer" class="dm-view"></div>
</div>

<audio id="notif" src="notification.mp3" preload="auto"></audio>

<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>

<script>
</script>

</body>
</html>
